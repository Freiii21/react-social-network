(this["webpackJsonpreact-social-network"]=this["webpackJsonpreact-social-network"]||[]).push([[3],{321:function(e,a,s){e.exports={dialogs:"Dialogs_dialogs__1WSDg",dialogsItems:"Dialogs_dialogsItems__3bjv9",line:"Dialogs_line__2SYE5",messagesField:"Dialogs_messagesField__1NgB3",messages:"Dialogs_messages__3apIQ",answerField:"Dialogs_answerField__1hM6v",inputField:"Dialogs_inputField__3wGxi",sendMessage:"Dialogs_sendMessage__3OVHo",companion:"Dialogs_companion__3f3cO",textareaFiled:"Dialogs_textareaFiled__FtUw7",error:"Dialogs_error__GBICm",messagesFiller:"Dialogs_messagesFiller__o41OG"}},322:function(e,a,s){e.exports={message:"Message_message__1GtsN",me:"Message_me__2rugh",you:"Message_you__2RIN_",messageTextFiled:"Message_messageTextFiled__TLaxr"}},323:function(e,a,s){e.exports={dialog:"DialogItem_dialog__2EsNO",avatar:"DialogItem_avatar__2dWX9",name:"DialogItem_name__1aT2G",active:"DialogItem_active__1XuwC"}},326:function(e,a,s){"use strict";s.r(a);var t=s(89),i=s(13),c=s(5),n=s(321),r=s.n(n),l=s(322),o=s.n(l),g=s(24),d=s(2),m=function(e){var a,s=null!==(a=e.myAvatar)&&void 0!==a?a:g.a;return Object(d.jsx)("div",{className:o.a.message,children:Object(d.jsxs)("div",{className:o.a[e.owner],children:["me"!==e.owner&&Object(d.jsx)("img",{src:e.friendAvatar,alt:"ava"}),Object(d.jsx)("div",{className:o.a.messageTextFiled,children:e.message}),"me"===e.owner&&Object(d.jsx)("img",{src:s,alt:"ava"})]})})},u=s(323),j=s.n(u),v=function(e){var a=e.activeInterlocutor!==e.id?j.a.dialog:"".concat(j.a.dialog," ").concat(j.a.active);return Object(d.jsxs)("div",{className:a,onClick:function(){e.changeActiveCompanion(e.id)},children:[Object(d.jsx)("img",{src:e.avatar,alt:"",className:j.a.avatar}),Object(d.jsx)("div",{className:j.a.name,children:e.name})]})},_=s(17),b=s(22),O=s(87),h=s(36);a.default=Object(b.d)(Object(_.b)((function(e){return{dialogsPage:e.dialogsPage,authorizedUserId:e.auth.userId}}),(function(e){return{sendMessage:function(a,s){e(Object(t.c)(a,s))},getUserProfile:function(a){e(Object(h.e)(a))},changeActiveCompanion:function(a){e(Object(t.a)(a))}}})),O.a)((function(e){var a=Object(c.useRef)(null);Object(c.useEffect)((function(){e.authorizedUserId&&e.getUserProfile(e.authorizedUserId)}),[]),Object(c.useEffect)((function(){a.current&&a.current.scrollIntoView({behavior:"smooth",block:"start"})}),[e.dialogsPage.messages,e.dialogsPage.activeInterlocutor]);var s=e.dialogsPage.dialogs.map((function(a){return Object(d.jsx)(v,{name:a.name,id:a.id,avatar:a.avatar,changeActiveCompanion:e.changeActiveCompanion,activeInterlocutor:e.dialogsPage.activeInterlocutor},a.id)})),t=e.dialogsPage.messages[e.dialogsPage.activeInterlocutor].map((function(a){return Object(d.jsx)(m,{message:a.message,owner:a.owner,myAvatar:e.dialogsPage.myAvatar,friendAvatar:a.avatar},a.id)})),n=t.length>0?t:Object(d.jsx)("div",{className:r.a.messagesFiller,children:"There are no messages yet..."}),l=Object(c.useState)(""),o=Object(i.a)(l,2),g=o[0],u=o[1],j=Object(c.useState)(""),_=Object(i.a)(j,2),b=_[0],O=_[1],h=function(){g&&"\n"!==g?(e.sendMessage(g,e.dialogsPage.activeInterlocutor),u("")):O("Message cannot be empty")};return Object(d.jsxs)("div",{className:r.a.dialogs,children:[Object(d.jsxs)("div",{className:r.a.dialogsItems,children:[Object(d.jsx)("div",{children:s}),Object(d.jsx)("div",{className:r.a.line})]}),Object(d.jsxs)("div",{className:r.a.messagesField,children:[Object(d.jsxs)("div",{className:r.a.messages,children:[Object(d.jsxs)("div",{className:r.a.companion,children:[Object(d.jsx)("img",{src:e.dialogsPage.dialogs[e.dialogsPage.activeInterlocutor].avatar,alt:""}),Object(d.jsx)("div",{children:e.dialogsPage.dialogs[e.dialogsPage.activeInterlocutor].name})]}),n]}),Object(d.jsxs)("div",{className:r.a.answerField,children:[Object(d.jsxs)("div",{className:r.a.textareaFiled,children:[Object(d.jsx)("textarea",{placeholder:"Type a message...",value:g,onChange:function(e){if(O(""),"\n"===e.currentTarget.value[e.currentTarget.value.length-1])return h();u(e.currentTarget.value)},className:r.a.inputField}),b&&Object(d.jsx)("div",{className:r.a.error,children:b})]}),Object(d.jsx)("div",{ref:a,children:Object(d.jsx)("button",{className:r.a.sendMessage,onClick:h,children:"Send"})})]})]})]})}))}}]);
//# sourceMappingURL=3.8b8fa214.chunk.js.map